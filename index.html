<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta namz="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Page qui affiche 2 graphiques</title>

    <style>
      .graph-placeholder {
        width: 300px;
        height: 500px;
        background-color: #4b94d0;
      }
    </style>
  </head>

  <body>
    <header>
      <nav>
        <ul>
          <li><a href="#graphique1">Premier graphique</a></li>
          <li><a href="#graphique2">Deuxièeme graphique</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section id="graphique1">
        <h2 id="graphique1">Graphique 1</h2>
        <p>Voici le contenu du 1er graphique</p>
        <figure>
          <div id="graph1" class="graph-placeholder"></div>
          <figcaption>Graphique 1 : Voici le premier graphique</figcaption>
        </figure>
      </section>

      <section id="graphique2">
        <h2 id="graphique2">Graphique 2</h2>
        <p>Voici le contenu du 2ème graphique</p>
        <figure>
          <div id="graph2" class="graph-placeholder"></div>
          <figcaption>Graphique 2 : Voici le deuxième graphique</figcaption>
        </figure>
      </section>
    </main>

    <div id="myplot"></div>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>
    <script>
      async function afficherPenguins() {
        let penguins = null;
        try {
          const penguinsReponse = await fetch("./penguins.json");
          penguins = await penguinsReponse.json();
          console.log(penguins);
        } catch (error) {
          console.error("Erreur lors du chargement du fichier JSON:", error);
        }
        return penguins;
      }

      afficherPenguins().then((penguins) => {
        if (penguins) {
          const plot = Plot.dot(penguins, {
            x: "culmen_length_mm",
            y: "culmen_depth_mm",
            color: "species",
          }).plot();
          const div = document.querySelector("#graph1");
          div.append(plot);
        }
      });
    </script>
  </body>
</html>
